/*********************************************************************************************************//**
* @file kern_debug.c
* @author 
*  JangHo,Yoo(YJH)
* @date 2012.10.22 
* @brief 
*  Source file of kernel debug
*  1. Output service of debug message
*************************************************************************************************************/

/*************************************************************************************************************
* INCLUDE FILES
*************************************************************************************************************/
#include <ctype.h>
#include <stdarg.h>
#include <string.h>
#include <stdio.h>
#include "kernel.h"

/*************************************************************************************************************
* LOCAL DEFINES
*************************************************************************************************************/
#if USE_KERNEL_DEBUG > 0
#define DEG_STR_BUFF_SZ	                 128  /**< Size of debug string buffer (1~128)    */
#define USE_DEBUG_UART_CH                128  /**< Debug port number (UART Channel)       */
#endif

/*************************************************************************************************************
* LOCAL CONSTANTS
*************************************************************************************************************/

/*************************************************************************************************************
* LOCAL DATA TYPES
*************************************************************************************************************/

/*************************************************************************************************************
* LOCAL TABLES
*************************************************************************************************************/

/*************************************************************************************************************
* LOCAL GLOBAL VARIABLES
*************************************************************************************************************/
#if USE_KERNEL_DEBUG > 0
static char DbgStrBuf[DEG_STR_BUFF_SZ];
#endif

/*************************************************************************************************************
* LOCAL FUNCTION PROTOTYPES
*************************************************************************************************************/
#if USE_KERNEL_DEBUG > 0
static void DbgPuts(const char* str);
static void putch(const char ch);
#endif

/*************************************************************************************************************
* LOCAL CONFIGURATION ERRORS
*************************************************************************************************************/

/*************************************************************************************************************
**************************************************************************************************************
* LOCAL FUNCTIONS
**************************************************************************************************************
*************************************************************************************************************/

/*************************************************************************************************************
**************************************************************************************************************
* GLOBAL FUNCTIONS
**************************************************************************************************************
*************************************************************************************************************/
#if USE_KERNEL_DEBUG > 0
/*********************************************************************************************************//**
* @param[in] format : print formatter.
* @param[out]
* @retval none
* @brief 
*  Debug message를 출력한다.
*************************************************************************************************************/
void DebugPrintf(const char *format, ...)
{
	va_list argp;

	va_start(argp, format);
	vsprintf(DbgStrBuf, format, argp); //$$$$$
	va_end(argp);

	DbgPuts(DbgStrBuf); //$$$$$
} /* DebugPrintf */


/*********************************************************************************************************//**
* @param[in] *str : pointer of string
* @param[out]
* @retval none
* @brief 
*  str버퍼의 문자열을 전송한다.
*************************************************************************************************************/
static void DbgPuts(const char* str)
{
	do {
		//TODO : Add your code

		putch(*str++);
	} while (*str != '\0');
} /* DbgPuts */	


/*********************************************************************************************************//**
* @param[in] ch : Sending a character
* @param[out]
* @retval none
* @brief 
*  One character is sent to the debug port.
*************************************************************************************************************/
static void putch(const char ch)
{
	//TODO : Add your code

} /* putch */
#endif
/********************************************** END OF FILE *************************************************/

